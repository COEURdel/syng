<!DOCTYPE html>
<html lang="en" ngapp="Syng">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <title>Syng</title>

  <script>window.$ = window.jQuery = require("../src/lib/jquery/jquery.min.js");</script>

  <script>window.Vue = require("vue");</script>

  <link rel="stylesheet" href="../style/lib/iview/iview.css" />

  <script>
    var ipc = require('electron').ipcRenderer; // For communication with the main process
    var IView = require('iview');
    Vue.use(IView);

    // Initialize the database
    var path = require('path');
    var tingo = require('tingodb')();
    var db = new tingo.Db(path.join(__dirname, "../src/db/syng"), {});

    $(document).ready(function() {
       window.manageLists = new Vue({
         el: "#manageLists",
         data: {
           wordListings: window.db._cols
         },
         methods: {
            handleSubmit (name) {
                /* this.$refs[name].validate((valid) => {
                    if (valid) {
                        this.$Message.success('提交成功!');
                    } else {
                        this.$Message.error('表单验证失败!');
                    }
                }) */
            },
            handleAdd () {
                /* this.formDynamic.items.push({
                    value: ''
                }); */
            },
            handleRemove (item) {
                // this.formDynamic.items.$remove(item);
            }
        }
       });

       console.log("In New Window");
       console.log(window.db._cols);
    });

    ipc.on('open-lists', function(event, args) {
      console.log(args);
    });
  </script>

  <style>
    #manageLists {
      margin-left: 30px;
      margin-right: 30px;
    }
  </style>
</head>

<body>
  <div id="manageLists">
    <center>
      <br>
      <h1>Manage Lists</h1>
      <br>
    </center>
    <Alert show-icon>
      Add and Remove Lists
      <Icon type="ios-lightbulb-outline" slot="icon"></Icon>
      <div slot="desc">
        With Syng, you can create custom vocabulary lists to help
        you study and organize what you want to learn. You can create
        new lists, and remove lists here. <b>PLease be aware: once you create
        a list you will be unable to change the list name.</b>
      </div>
    </Alert>
    <br>
    <center>
      <i-form v-ref:form-dynamic :model="wordListings" :label-width="80">
          <Form-item
              v-for="collection in wordListings"
              :prop="collection.collectionName"
              :rules="{required: true, message: '项目' + ($index + 1) +'不能为空', trigger: 'blur'}">
              <Row>
                  <i-col span="18">
                      <i-input disabled type="text" :value.sync="collection.collectionName" placeholder="New List..."></i-input>
                  </i-col>
                  <i-col span="4" offset="1">
                      <i-button type="error" @click="handleRemove(item)">Delete</i-button>
                  </i-col>
              </Row>
              <br>
          </Form-item>
          <Form-item>
              <Row>
                  <i-col span="12">
                      <i-button type="dashed" long @click="handleAdd" icon="plus-round">Create New List</i-button>
                  </i-col>
              </Row>
          </Form-i0tem>
          <br>
          <Form-item>
            <i-button type="primary" @click="handleSubmit('formDynamic')">提交</i-button>
            <i-button type="ghost" @click="handleReset('formDynamic')" style="margin-left: 8px">重置</i-button>
          </Form-item>
      </i-form>
    </center>
  </div>
</body>

</html>
